!function(t){var n=!(!t.history||!t.history.pushState),e={version:"0.0.1",routes:{},options:{html5:!0}},i=t.location.pathname,o=function(t,n){var e=n.match(t.pattern);if(e){for(var i={},o=0,r=e.length;r>o;o++){var a=t.params[o-1];i[o]=e[o],a&&(i[a]=e[o])}return i}};e.match=function(t,n){return t instanceof RegExp?n.match(t):o(a(t,n))},e.route=function(t,n){var e=this.routes[t]=new s(t);return"function"==typeof n&&e.enter(n),e},e.navigate=function(o,r){r||(r={}),"/"!==o[0]&&(o="/"+o),i!==o&&(e._dispatch(o),n?(e.options.html5||(o="#"+o),r.replace?t.history.replaceState(null,null,o):t.history.pushState(null,null,o)):(r.replace&&t.history.back(),t.location.hash=o))},e.forward=e.go=function(n){t.history.go(n||1)},e.back=function(n){t.history.go(-n||-1)},e._dispatch=function(t){if("/"!==t[0]&&(t="/"+t),i!==t){for(var n in this.routes){var e=this.routes[n],r=o(e.pattern,t),a=o(e.pattern,i);if(r){for(var s=e.stack.enter,c=[],n=0,h=s.length;h>n;n++)!function(t){c.push(function(n){s[t](r,n)})}(n);u(c)}if(a){for(var f=e.stack.exit,p=[],n=0,h=f.length;h>n;n++)!function(t){p.push(function(n){f[t](a,n)})}(n);u(p)}}i=t}};var r=/(\()?([:\*])(\w*)\)?/g,a=function(t){var n=[],e=t.replace(/(\/|\.)/g,"\\$&").replace(r,function(t,e,i,o){if(n.push(o),"*"===i)var r="(.*?)";else var r="([^/]+)";return e&&(r+="?"),r});return{params:n,pattern:new RegExp("^"+e+"$")}},u=function(t,n){if("function"!=typeof n&&(n=function(){}),!t.length)return n();var e=0,i=function(){t[e](function(o){o?(n(o),n=function(){}):(e++,e>=t.length?n():i())})};i()},s=function(t){this.path=t,this.pattern=a(t),this.stack={enter:[],exit:[]}};s.prototype.enter=function(t){return this.stack.enter.push(t),this},s.prototype.exit=function(t){return this.stack.exit.push(t),this};var c=function(){e._dispatch(t.location.pathname)},h=function(){e._dispatch(t.location.hash)};n?t.addEventListener?t.addEventListener("popstate",c,!1):t.onpopstate=c:t.addEventListener?t.addEventListener("hashchange",h,!1):t.onhashchange=h,"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.navi=e}(window);
//# sourceMappingURL=lib/navi.min.map