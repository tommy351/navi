!function(t){var n=!(!t.history||!t.history.pushState),e={version:"0.0.1",routes:{},options:{html5:!0}},o=t.location.pathname,i=function(t,n){var e=n.match(t.pattern);if(e){for(var o={},i=0,r=e.length;r>i;i++){var a=t.params[i-1];o[i]=e[i],a&&(o[a]=e[i])}return o}};e.match=function(t,n){return t instanceof RegExp?n.match(t):i(a(t,n))},e.route=function(t,n){var e=this.routes[t]=new s(t);return"function"==typeof n&&e.enter(n),e},e.navigate=function(i,r){r||(r={}),"/"!==i[0]&&(i="/"+i),o!==i&&(e._dispatch(i),n?(e.options.html5||(i="#"+i),r.replace?t.history.replaceState(null,null,i):t.history.pushState(null,null,i)):(r.replace&&t.history.back(),t.location.hash=i))},e.forward=e.go=function(n){t.history.go(n||1)},e.back=function(n){t.history.go(-n||-1)},e._dispatch=function(t){if("/"!==t[0]&&(t="/"+t),o!==t){for(var n in this.routes){var e=this.routes[n],r=i(e.pattern,t),a=i(e.pattern,o);if(r){for(var s=e.stack.enter,u=[],n=0,h=s.length;h>n;n++)!function(t){u.push(function(n){s[t](r,n)})}(n);c(u)}if(a){for(var f=e.stack.exit,p=[],n=0,h=f.length;h>n;n++)!function(t){p.push(function(n){f[t](a,n)})}(n);c(p)}}o=t}};var r=/(\()?([:\*])(\w*)\)?/g,a=function(t){var n=[],e=t.replace(/(\/|\.)/g,"\\$&").replace(r,function(t,e,o,i){if(n.push(i),"*"===o)var r="(.*?)";else var r="([^/]+)";return e&&(r+="?"),r});return{params:n,pattern:new RegExp("^"+e+"$")}},c=function(t,n){if("function"!=typeof n&&(n=function(){}),!t.length)return n();var e=0,o=function(){t[e](function(i){i?(n(i),n=function(){}):(e++,e>=t.length?n():o())})};o()},s=function(t){this.path=t,this.pattern=a(t),this.stack={enter:[],exit:[]}},u=function(t){return"[object Array]"===Object.prototype.toString.call(t)};s.prototype.enter=function(t){return"function"==typeof t?this.stack.enter.push(t):u(t)&&(this.stack.enter=this.stack.enter.concat(t)),this},s.prototype.exit=function(t){return"function"==typeof t?this.stack.exit.push(t):u(t)&&(this.stack.exit=this.stack.exit.concat(t)),this};var h=function(){e._dispatch(t.location.pathname)},f=function(){e._dispatch(t.location.hash)};n?t.addEventListener?t.addEventListener("popstate",h,!1):t.onpopstate=h:t.addEventListener?t.addEventListener("hashchange",f,!1):t.onhashchange=f,"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.navi=e}(window);
//# sourceMappingURL=lib/navi.min.map